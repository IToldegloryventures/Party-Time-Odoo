<?xml version="1.0" encoding="utf-8"?>
<odoo noupdate="1">
    <!--
    PTT Event Reminder Email Templates
    ===================================
    Email templates for automated event reminders sent by cron jobs.
    
    NOTE: x_studio_* fields exist on crm.lead, accessed via ptt_crm_lead_id
    -->

    <!-- 10-Day Event Reminder Template -->
    <record id="email_template_event_reminder_10_day" model="mail.template">
        <field name="name">PTT: 10-Day Event Reminder</field>
        <field name="model_id" ref="project.model_project_project"/>
        <field name="email_from">{{ (object.company_id.email or user.email) }}</field>
        <field name="email_to">{{ object.user_id.email }}</field>
        <field name="subject">10 Days Until Event: {{ object.name }}</field>
        <field name="body_html" type="html">
            <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto;">
    <div style="background-color: #875A7B; color: white; padding: 20px; text-align: center;">
        <h1 style="margin: 0;">Event Reminder</h1>
        <p style="margin: 10px 0 0 0; font-size: 18px;">10 Days Until Your Event!</p>
    </div>
    
    <div style="padding: 20px; background-color: #f9f9f9;">
        <p>Hi <t t-esc="object.user_id.name or 'Team'"/>,</p>
        
        <p>This is a friendly reminder that <strong><t t-esc="object.name"/></strong> is coming up in <strong>10 days</strong>!</p>
        
        <div style="background-color: white; border: 1px solid #ddd; border-radius: 8px; padding: 15px; margin: 20px 0;">
            <h3 style="margin-top: 0; color: #875A7B;">Event Details</h3>
            <table style="width: 100%; border-collapse: collapse;">
                <tr>
                    <td style="padding: 8px 0; border-bottom: 1px solid #eee;"><strong>Event Date:</strong></td>
                    <td style="padding: 8px 0; border-bottom: 1px solid #eee;"><t t-if="object.ptt_crm_lead_id" t-esc="object.ptt_crm_lead_id.x_studio_event_date"/><t t-else="">TBD</t></td>
                </tr>
                <tr>
                    <td style="padding: 8px 0; border-bottom: 1px solid #eee;"><strong>Client:</strong></td>
                    <td style="padding: 8px 0; border-bottom: 1px solid #eee;"><t t-esc="object.partner_id.name or 'Not assigned'"/></td>
                </tr>
                <tr>
                    <td style="padding: 8px 0; border-bottom: 1px solid #eee;"><strong>Venue:</strong></td>
                    <td style="padding: 8px 0; border-bottom: 1px solid #eee;"><t t-if="object.ptt_crm_lead_id" t-esc="object.ptt_crm_lead_id.x_studio_venue_name or 'Not set'"/><t t-else="">Not set</t></td>
                </tr>
                <tr>
                    <td style="padding: 8px 0; border-bottom: 1px solid #eee;"><strong>Guest Count:</strong></td>
                    <td style="padding: 8px 0; border-bottom: 1px solid #eee;"><t t-esc="object.ptt_guest_count or 'Not set'"/></td>
                </tr>
                <tr>
                    <td style="padding: 8px 0;"><strong>Vendors Assigned:</strong></td>
                    <td style="padding: 8px 0;"><t t-esc="object.ptt_vendor_count"/> vendor(s)</td>
                </tr>
            </table>
        </div>
        
        <div style="background-color: #fff3cd; border: 1px solid #ffc107; border-radius: 8px; padding: 15px; margin: 20px 0;">
            <h3 style="margin-top: 0; color: #856404;">Action Items for This Week</h3>
            <ul style="margin: 0; padding-left: 20px;">
                <li>Confirm all vendor bookings and arrival times</li>
                <li>Review equipment checklist and prepare inventory</li>
                <li>Contact client for any last-minute changes</li>
                <li>Verify venue access and setup requirements</li>
                <li>Review timeline and run-of-show</li>
            </ul>
        </div>
        
        <t t-if="ctx.get('ptt_missing_info')">
            <div style="background-color: #fff3cd; border: 1px solid #ffeeba; border-radius: 8px; padding: 15px; margin: 20px 0;">
                <h3 style="margin-top: 0; color: #856404;">Missing Information</h3>
                <ul style="margin: 0; padding-left: 20px;">
                    <t t-foreach="ctx.get('ptt_missing_info')" t-as="item">
                        <li><t t-esc="item"/></li>
                    </t>
                </ul>
            </div>
        </t>

        <t t-if="ctx.get('ptt_incomplete_tasks')">
            <div style="background-color: #e2f0fb; border: 1px solid #b8daff; border-radius: 8px; padding: 15px; margin: 20px 0;">
                <h3 style="margin-top: 0; color: #0b5ed7;">Incomplete Tasks</h3>
                <ul style="margin: 0; padding-left: 20px;">
                    <t t-foreach="ctx.get('ptt_incomplete_tasks')" t-as="task">
                        <li><t t-esc="task"/></li>
                    </t>
                </ul>
            </div>
        </t>

        <t t-if="ctx.get('ptt_unconfirmed_vendors')">
            <div style="background-color: #f8d7da; border: 1px solid #f5c2c7; border-radius: 8px; padding: 15px; margin: 20px 0;">
                <h3 style="margin-top: 0; color: #842029;">Unconfirmed Vendors</h3>
                <ul style="margin: 0; padding-left: 20px;">
                    <t t-foreach="ctx.get('ptt_unconfirmed_vendors')" t-as="vendor">
                        <li><t t-esc="vendor"/></li>
                    </t>
                </ul>
            </div>
        </t>

        <p style="text-align: center; margin-top: 30px;">
            <a t-attf-href="{{ object.get_base_url() }}/web#id={{ object.id }}&amp;model=project.project&amp;view_type=form"
               style="background-color: #875A7B; color: white; padding: 12px 25px; text-decoration: none; border-radius: 5px; display: inline-block;">
                View Project Details
            </a>
        </p>
        
        <p style="color: #666; font-size: 12px; margin-top: 30px; text-align: center;">
            This is an automated reminder from Party Time Texas Event Management System.
        </p>
    </div>
            </div>
        </field>
        <field name="auto_delete" eval="True"/>
    </record>

    <!-- 3-Day Urgent Event Reminder Template -->
    <record id="email_template_event_reminder_3_day" model="mail.template">
        <field name="name">PTT: 3-Day Urgent Event Reminder</field>
        <field name="model_id" ref="project.model_project_project"/>
        <field name="email_from">{{ (object.company_id.email or user.email) }}</field>
        <field name="email_to">{{ object.user_id.email }}</field>
        <field name="subject">URGENT: 3 Days Until Event - {{ object.name }}</field>
        <field name="body_html" type="html">
            <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto;">
    <div style="background-color: #dc3545; color: white; padding: 20px; text-align: center;">
        <h1 style="margin: 0;">URGENT: Event in 3 Days!</h1>
        <p style="margin: 10px 0 0 0; font-size: 18px;">Final Preparations Required</p>
    </div>
    
    <div style="padding: 20px; background-color: #f9f9f9;">
        <p>Hi <t t-esc="object.user_id.name or 'Team'"/>,</p>
        
        <p><strong><t t-esc="object.name"/></strong> is happening in <strong>3 DAYS</strong>! Please ensure all final preparations are complete.</p>
        
        <div style="background-color: white; border: 1px solid #ddd; border-radius: 8px; padding: 15px; margin: 20px 0;">
            <h3 style="margin-top: 0; color: #dc3545;">Event Summary</h3>
            <table style="width: 100%; border-collapse: collapse;">
                <tr>
                    <td style="padding: 8px 0; border-bottom: 1px solid #eee;"><strong>Event Date:</strong></td>
                    <td style="padding: 8px 0; border-bottom: 1px solid #eee;"><strong style="color: #dc3545;"><t t-if="object.ptt_crm_lead_id" t-esc="object.ptt_crm_lead_id.x_studio_event_date"/><t t-else="">TBD</t></strong></td>
                </tr>
                <tr>
                    <td style="padding: 8px 0; border-bottom: 1px solid #eee;"><strong>Start Time:</strong></td>
                    <td style="padding: 8px 0; border-bottom: 1px solid #eee;"><t t-esc="object.ptt_event_start_time or 'CHECK IMMEDIATELY'"/></td>
                </tr>
                <tr>
                    <td style="padding: 8px 0; border-bottom: 1px solid #eee;"><strong>Setup Time:</strong></td>
                    <td style="padding: 8px 0; border-bottom: 1px solid #eee;"><t t-esc="object.ptt_setup_start_time or 'CHECK IMMEDIATELY'"/></td>
                </tr>
                <tr>
                    <td style="padding: 8px 0; border-bottom: 1px solid #eee;"><strong>Venue:</strong></td>
                    <td style="padding: 8px 0; border-bottom: 1px solid #eee;"><t t-if="object.ptt_crm_lead_id" t-esc="object.ptt_crm_lead_id.x_studio_venue_name or 'NOT SET!'"/><t t-else="">NOT SET!</t></td>
                </tr>
                <tr>
                    <td style="padding: 8px 0; border-bottom: 1px solid #eee;"><strong>Address:</strong></td>
                    <td style="padding: 8px 0; border-bottom: 1px solid #eee;"><t t-if="object.ptt_crm_lead_id" t-esc="object.ptt_crm_lead_id.x_studio_venue_address or 'NOT SET!'"/><t t-else="">NOT SET!</t></td>
                </tr>
                <tr>
                    <td style="padding: 8px 0;"><strong>Client:</strong></td>
                    <td style="padding: 8px 0;">
                        <t t-esc="object.partner_id.name or 'NOT ASSIGNED!'"/>
                        <t t-if="object.partner_id.phone"> - <t t-esc="object.partner_id.phone"/></t>
                    </td>
                </tr>
            </table>
        </div>
        
        <div style="background-color: #f8d7da; border: 1px solid #f5c6cb; border-radius: 8px; padding: 15px; margin: 20px 0;">
            <h3 style="margin-top: 0; color: #721c24;">CRITICAL FINAL CHECKLIST</h3>
            <ul style="margin: 0; padding-left: 20px;">
                <li><strong>Equipment:</strong> All equipment tested and packed</li>
                <li><strong>Vendors:</strong> Final confirmation calls completed</li>
                <li><strong>Client:</strong> Final walkthrough scheduled or completed</li>
                <li><strong>Staff:</strong> All team members confirmed and briefed</li>
                <li><strong>Backup Plans:</strong> Weather/equipment contingencies reviewed</li>
                <li><strong>Documents:</strong> Contracts, permits, and insurance verified</li>
            </ul>
        </div>
        
        <div style="background-color: #d4edda; border: 1px solid #c3e6cb; border-radius: 8px; padding: 15px; margin: 20px 0;">
            <h3 style="margin-top: 0; color: #155724;">Emergency Contacts</h3>
            <p style="margin: 5px 0;">Make sure you have contact numbers for:</p>
            <ul style="margin: 0; padding-left: 20px;">
                <li>Client (primary and secondary contacts)</li>
                <li>All assigned vendors</li>
                <li>Venue coordinator</li>
                <li>PTT backup team</li>
            </ul>
        </div>
        
        <t t-if="ctx.get('ptt_missing_info')">
            <div style="background-color: #fff3cd; border: 1px solid #ffeeba; border-radius: 8px; padding: 15px; margin: 20px 0;">
                <h3 style="margin-top: 0; color: #856404;">Missing Information</h3>
                <ul style="margin: 0; padding-left: 20px;">
                    <t t-foreach="ctx.get('ptt_missing_info')" t-as="item">
                        <li><t t-esc="item"/></li>
                    </t>
                </ul>
            </div>
        </t>

        <t t-if="ctx.get('ptt_incomplete_tasks')">
            <div style="background-color: #e2f0fb; border: 1px solid #b8daff; border-radius: 8px; padding: 15px; margin: 20px 0;">
                <h3 style="margin-top: 0; color: #0b5ed7;">Incomplete Tasks</h3>
                <ul style="margin: 0; padding-left: 20px;">
                    <t t-foreach="ctx.get('ptt_incomplete_tasks')" t-as="task">
                        <li><t t-esc="task"/></li>
                    </t>
                </ul>
            </div>
        </t>

        <t t-if="ctx.get('ptt_unconfirmed_vendors')">
            <div style="background-color: #f8d7da; border: 1px solid #f5c2c7; border-radius: 8px; padding: 15px; margin: 20px 0;">
                <h3 style="margin-top: 0; color: #842029;">Unconfirmed Vendors</h3>
                <ul style="margin: 0; padding-left: 20px;">
                    <t t-foreach="ctx.get('ptt_unconfirmed_vendors')" t-as="vendor">
                        <li><t t-esc="vendor"/></li>
                    </t>
                </ul>
            </div>
        </t>

        <p style="text-align: center; margin-top: 30px;">
            <a t-attf-href="{{ object.get_base_url() }}/web#id={{ object.id }}&amp;model=project.project&amp;view_type=form"
               style="background-color: #dc3545; color: white; padding: 12px 25px; text-decoration: none; border-radius: 5px; display: inline-block; font-weight: bold;">
                View Project NOW
            </a>
        </p>
        
        <p style="color: #666; font-size: 12px; margin-top: 30px; text-align: center;">
            This is an automated URGENT reminder from Party Time Texas Event Management System.<br/>
            If you have questions, please contact your supervisor immediately.
        </p>
    </div>
            </div>
        </field>
        <field name="auto_delete" eval="True"/>
    </record>

</odoo>
