<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- 
        Sale Order View Extensions for PTT
        
        Adds:
        1. Tier 1 info header on quote form (Event Date, Venue, Guest Count)
        2. Price Per Person on form, kanban, and tree views
        
        Reference: https://www.odoo.com/documentation/19.0/developer/reference/user_interface/view_architectures.html
    -->
    
    <!-- ===================================== -->
    <!-- FORM VIEW: Add Tier 1 Header + Price  -->
    <!-- ===================================== -->
    <record id="view_order_form_ptt_inherit" model="ir.ui.view">
        <field name="name">sale.order.form.ptt</field>
        <field name="model">sale.order</field>
        <field name="inherit_id" ref="sale.view_order_form"/>
        <field name="arch" type="xml">
            <!-- Add Event Details group after partner info -->
            <xpath expr="//field[@name='partner_id']/.." position="after">
                <group string="Event Details" name="ptt_event_details" 
                       invisible="not opportunity_id">
                    <group>
                        <field name="ptt_event_date"/>
                        <field name="ptt_event_type"/>
                        <field name="ptt_venue_name"/>
                    </group>
                    <group>
                        <field name="ptt_guest_count"/>
                        <field name="ptt_event_time"/>
                        <field name="ptt_price_per_person" widget="monetary"/>
                    </group>
                </group>
            </xpath>
        </field>
    </record>
    
    <!-- ===================================== -->
    <!-- KANBAN/CARD VIEW: Show Price Per Person -->
    <!-- NOTE: Odoo 19 kanban structure simplified   -->
    <!-- Fields are searchable/filterable via tree  -->
    <!-- ===================================== -->
    
    <!-- ===================================== -->
    <!-- TREE/LIST VIEW: Add columns          -->
    <!-- ===================================== -->
    <record id="view_order_tree_ptt_inherit" model="ir.ui.view">
        <field name="name">sale.order.tree.ptt</field>
        <field name="model">sale.order</field>
        <field name="inherit_id" ref="sale.view_order_tree"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='amount_total']" position="before">
                <field name="ptt_event_date" optional="show"/>
                <field name="ptt_guest_count" optional="show"/>
                <field name="ptt_price_per_person" optional="show"/>
            </xpath>
        </field>
    </record>
</odoo>
