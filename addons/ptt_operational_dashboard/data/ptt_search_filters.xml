<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- PTT Operational Dashboard - Search Filters -->
    <!-- Pre-configured saved filters for common views (ir.filters records) -->

    <!-- ====== EVENT FILTERS ====== -->
    <!-- MY EVENTS FILTER - Events assigned to current user -->
    <record id="filter_ptt_my_events" model="ir.filters">
        <field name="name">My Events</field>
        <field name="model_id" ref="project.model_project_project"/>
        <field name="domain">[
            ("ptt_event_date", "!=", False),
            ("user_id", "=", uid)
        ]</field>
        <field name="context">{
            "group_by": ["stage_id"]
        }</field>
        <field name="is_default" eval="True"/>
        <field name="user_id" eval="False"/>
        <field name="sort">[("ptt_event_date", "asc")]</field>
    </record>

    <!-- ALL EVENTS FILTER -->
    <record id="filter_ptt_all_events" model="ir.filters">
        <field name="name">All Events</field>
        <field name="model_id" ref="project.model_project_project"/>
        <field name="domain">[("ptt_event_date", "!=", False)]</field>
        <field name="context">{
            "group_by": ["stage_id", "user_id"]
        }</field>
        <field name="user_id" eval="False"/>
    </record>

    <!-- UPCOMING EVENTS (Next 30 Days) -->
    <record id="filter_ptt_upcoming_events_30" model="ir.filters">
        <field name="name">Upcoming Events (30 Days)</field>
        <field name="model_id" ref="project.model_project_project"/>
        <field name="domain">[
            ("ptt_event_date", "!=", False),
            ("ptt_event_date", "&gt;=", (context_today() - __import__("datetime").timedelta(days=0)).strftime("%Y-%m-%d")),
            ("ptt_event_date", "&lt;=", (context_today() + __import__("datetime").timedelta(days=30)).strftime("%Y-%m-%d"))
        ]</field>
        <field name="context">{
            "group_by": ["ptt_event_date:day"]
        }</field>
        <field name="user_id" eval="False"/>
    </record>

    <!-- PAST EVENTS -->
    <record id="filter_ptt_past_events" model="ir.filters">
        <field name="name">Past Events</field>
        <field name="model_id" ref="project.model_project_project"/>
        <field name="domain">[
            ("ptt_event_date", "!=", False),
            ("ptt_event_date", "&lt;", (context_today()).strftime("%Y-%m-%d"))
        ]</field>
        <field name="context">{
            "group_by": ["ptt_event_date:month"]
        }</field>
        <field name="user_id" eval="False"/>
    </record>

    <!-- ====== TASK FILTERS ====== -->
    <!-- MY TASKS FILTER - Tasks assigned to current user -->
    <record id="filter_ptt_my_tasks" model="ir.filters">
        <field name="name">My Tasks</field>
        <field name="model_id" ref="project.model_project_task"/>
        <field name="domain">[
            ("user_ids", "in", [uid]),
            ("stage_id.fold", "=", False)
        ]</field>
        <field name="context">{
            "group_by": ["date_deadline:day", "stage_id"]
        }</field>
        <field name="is_default" eval="True"/>
        <field name="user_id" eval="False"/>
        <field name="sort">[("date_deadline", "asc"), ("priority", "desc")]</field>
    </record>

    <!-- OVERDUE TASKS -->
    <record id="filter_ptt_overdue_tasks" model="ir.filters">
        <field name="name">Overdue Tasks</field>
        <field name="model_id" ref="project.model_project_task"/>
        <field name="domain">[
            ("user_ids", "in", [uid]),
            ("date_deadline", "&lt;", (context_today()).strftime("%Y-%m-%d")),
            ("stage_id.fold", "=", False)
        ]</field>
        <field name="context">{
            "group_by": ["date_deadline:day"]
        }</field>
        <field name="user_id" eval="False"/>
    </record>

    <!-- TASKS DUE TODAY -->
    <record id="filter_ptt_tasks_due_today" model="ir.filters">
        <field name="name">Due Today</field>
        <field name="model_id" ref="project.model_project_task"/>
        <field name="domain">[
            ("user_ids", "in", [uid]),
            ("date_deadline", "=", (context_today()).strftime("%Y-%m-%d")),
            ("stage_id.fold", "=", False)
        ]</field>
        <field name="context">{
            "group_by": ["stage_id"]
        }</field>
        <field name="user_id" eval="False"/>
    </record>

    <!-- ALL ACTIVE TASKS -->
    <record id="filter_ptt_all_active_tasks" model="ir.filters">
        <field name="name">All Active Tasks</field>
        <field name="model_id" ref="project.model_project_task"/>
        <field name="domain">[("stage_id.fold", "=", False)]</field>
        <field name="context">{
            "group_by": ["stage_id", "user_ids"]
        }</field>
        <field name="user_id" eval="False"/>
    </record>

    <!-- ====== LEAD FILTERS ====== -->
    <!-- MY LEADS FILTER - Leads assigned to current user -->
    <record id="filter_ptt_my_leads" model="ir.filters">
        <field name="name">My Leads</field>
        <field name="model_id" ref="crm.model_crm_lead"/>
        <field name="domain">[
            ("type", "=", "lead"),
            ("user_id", "=", uid)
        ]</field>
        <field name="context">{
            "search_default_assigned_to_me": 1,
            "group_by": ["stage_id"]
        }</field>
        <field name="is_default" eval="True"/>
        <field name="user_id" eval="False"/>
    </record>

    <!-- QUALIFIED LEADS -->
    <record id="filter_ptt_qualified_leads" model="ir.filters">
        <field name="name">Qualified Leads</field>
        <field name="model_id" ref="crm.model_crm_lead"/>
        <field name="domain">[
            ("type", "=", "lead"),
            ("stage_id.name", "in", ["Qualified"])
        ]</field>
        <field name="context">{
            "group_by": ["user_id"]
        }</field>
        <field name="user_id" eval="False"/>
    </record>

    <!-- ====== QUOTE FILTERS ====== -->
    <!-- MY QUOTES (Draft/Sent) - Quotes assigned to current user -->
    <record id="filter_ptt_my_quotes" model="ir.filters">
        <field name="name">My Quotes</field>
        <field name="model_id" ref="sale.model_sale_order"/>
        <field name="domain">[
            ("state", "in", ["draft", "sent"]),
            ("user_id", "=", uid)
        ]</field>
        <field name="context">{
            "search_default_my_quotations": 1
        }</field>
        <field name="is_default" eval="True"/>
        <field name="user_id" eval="False"/>
    </record>

    <!-- PENDING QUOTES (Awaiting Customer Response) -->
    <record id="filter_ptt_pending_quotes" model="ir.filters">
        <field name="name">Pending Quotes (Awaiting Response)</field>
        <field name="model_id" ref="sale.model_sale_order"/>
        <field name="domain">[
            ("state", "=", "sent"),
            ("date_order", "&gt;=", (context_today() - __import__("datetime").timedelta(days=7)).strftime("%Y-%m-%d"))
        ]</field>
        <field name="context">{
            "search_default_my_quotations": 1
        }</field>
        <field name="user_id" eval="False"/>
    </record>

    <!-- CONFIRMED ORDERS -->
    <record id="filter_ptt_confirmed_orders" model="ir.filters">
        <field name="name">Confirmed Orders</field>
        <field name="model_id" ref="sale.model_sale_order"/>
        <field name="domain">[
            ("state", "in", ["sale", "done"])
        ]</field>
        <field name="context">{
            "group_by": ["user_id"]
        }</field>
        <field name="user_id" eval="False"/>
    </record>

    <!-- ====== INVOICE FILTERS ====== -->
    <!-- DUE INVOICES -->
    <record id="filter_ptt_due_invoices" model="ir.filters">
        <field name="name">Invoices Due</field>
        <field name="model_id" ref="account.model_account_move"/>
        <field name="domain">[
            ("move_type", "=", "out_invoice"),
            ("state", "=", "posted"),
            ("invoice_date_due", "&lt;=", (context_today()).strftime("%Y-%m-%d"))
        ]</field>
        <field name="context">{
            "group_by": ["partner_id"]
        }</field>
        <field name="user_id" eval="False"/>
    </record>

    <!-- OUTSTANDING INVOICES -->
    <record id="filter_ptt_outstanding_invoices" model="ir.filters">
        <field name="name">Outstanding Invoices</field>
        <field name="model_id" ref="account.model_account_move"/>
        <field name="domain">[
            ("move_type", "=", "out_invoice"),
            ("state", "=", "posted"),
            ("invoice_date_due", "&gt;", (context_today()).strftime("%Y-%m-%d"))
        ]</field>
        <field name="context">{
            "group_by": ["invoice_date_due:month"]
        }</field>
        <field name="user_id" eval="False"/>
    </record>

</odoo>
