<?xml version="1.0" encoding="UTF-8"?>
<templates xml:space="preserve">
    <t t-name="ptt_operational_dashboard.KpiCard">
        <div class="ptt_kpi_card card position-relative" 
             t-att-style="'border-left-color: ' + (props.color || '#CC0000')"
             t-att-class="props.clickable ? 'cursor-pointer' : ''"
             t-att-title="props.tooltip or props.title"
             t-on-click="props.onClick ? () => props.onClick() : undefined">
            <div class="d-flex justify-content-between align-items-start h-100">
                <div class="flex-grow-1 position-relative" style="z-index: 1;">
                    <h6 class="text-muted mb-2 small text-uppercase fw-normal" t-esc="props.title"/>
                    <h2 class="mb-1 fw-bold" t-esc="props.value"/>
                    <t t-if="props.trend">
                        <div class="d-flex align-items-center mt-2">
                            <i t-att-class="'fa fa-arrow-' + (props.trend &gt; 0 ? 'up text-success' : props.trend &lt; 0 ? 'down text-danger' : 'right text-muted') + ' me-1'"/>
                            <small t-att-class="props.trend &gt; 0 ? 'text-success fw-semibold' : props.trend &lt; 0 ? 'text-danger fw-semibold' : 'text-muted'">
                                <t t-if="props.trend !== 0">
                                    <t t-esc="Math.abs(props.trend)"/>%
                                </t>
                                <t t-else="">No change</t>
                            </small>
                            <small class="text-muted ms-2" t-if="props.trendPeriod" t-esc="props.trendPeriod"/>
                        </div>
                    </t>
                    <small class="text-muted d-block mt-1" t-if="props.subtitle" t-esc="props.subtitle"/>
                </div>
                <div class="ptt_kpi_icon">
                    <i t-if="props.icon" t-att-class="'fa ' + props.icon + ' fa-2x'" t-att-style="'color: ' + (props.color || '#CC0000')"/>
                </div>
            </div>
            <t t-if="props.badge">
                <span class="badge position-absolute top-0 end-0 m-2" t-att-class="props.badgeClass || 'bg-danger'" t-esc="props.badge"/>
            </t>
        </div>
    </t>
</templates>

