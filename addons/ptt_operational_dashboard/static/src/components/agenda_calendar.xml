<?xml version="1.0" encoding="UTF-8"?>
<templates xml:space="preserve">
    <t t-name="ptt_operational_dashboard.AgendaCalendar">
        <div class="ptt-section">
            <div class="ptt-section-header">
                <h2><i class="fa fa-calendar"/> My Agenda</h2>
                <a class="ptt-section-action" href="#" t-on-click.prevent="onViewAllClick">
                    View All Events â†’
                </a>
            </div>
            
            <div class="ptt-card">
                <div class="ptt-agenda">
                    <t t-if="groupedEvents.length === 0">
                        <div class="ptt-empty-state">
                            <i class="fa fa-calendar-o"/>
                            <p>No upcoming events in the next 30 days</p>
                            <small class="text-muted">Events will appear here when you have CRM leads with event dates assigned to you</small>
                        </div>
                    </t>
                    <t t-else="">
                        <t t-foreach="groupedEvents" t-as="day" t-key="day.date">
                            <div class="ptt-agenda-day">
                                <div t-att-class="'ptt-agenda-date' + (day.isToday ? ' today' : '')">
                                    <t t-esc="day.label"/>
                                </div>
                                <div class="ptt-agenda-events">
                                    <t t-foreach="day.events" t-as="event" t-key="event.id">
                                        <div 
                                            class="ptt-agenda-event"
                                            t-att-style="'border-left-color: ' + event.color"
                                            t-on-click="() => this.onEventClick(event)">
                                            <div class="ptt-event-header">
                                                <span class="ptt-event-name" t-esc="event.name"/>
                                                <span class="ptt-event-stage badge" t-att-style="'background-color: ' + event.color">
                                                    <t t-esc="event.stage_name"/>
                                                </span>
                                            </div>
                                            <t t-if="event.partner_name">
                                                <span class="ptt-event-client">
                                                    <i class="fa fa-user me-1"/>
                                                    <t t-esc="event.partner_name"/>
                                                </span>
                                            </t>
                                        </div>
                                    </t>
                                </div>
                            </div>
                        </t>
                    </t>
                </div>
            </div>
        </div>
    </t>
</templates>
