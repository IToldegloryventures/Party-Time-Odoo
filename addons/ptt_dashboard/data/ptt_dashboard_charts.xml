<?xml version="1.0" encoding="UTF-8"?>
<odoo noupdate="0">
    <!-- 
        PTT Dashboard Charts Configuration
        Using proper ref= syntax for ir.model references
    -->

    <!-- ========================================== -->
    <!-- TAB 1: MY TASKS                            -->
    <!-- ========================================== -->

    <!-- KPI: Due Today -->
    <record id="chart_my_tasks_today_kpi" model="dashboard.chart">
        <field name="name">Due Today</field>
        <field name="dashboard_id" ref="dashboard_my_tasks"/>
        <field name="chart_type">kpi</field>
        <field name="kpi_model_id" ref="project.model_project_task"/>
        <field name="kpi_data_type">count</field>
        <field name="kpi_domain">[('user_ids', 'in', [uid]), ('stage_id.fold', '=', False)]</field>
        <field name="kpi_date_filter_field_id" ref="project.field_project_task__date_deadline"/>
        <field name="kpi_date_filter_option">today</field>
        <field name="default_icon">fa fa-calendar-check-o</field>
        <field name="background_color">#3498db</field>
        <field name="font_color">#ffffff</field>
    </record>

    <!-- KPI: Overdue -->
    <record id="chart_my_overdue_kpi" model="dashboard.chart">
        <field name="name">Overdue</field>
        <field name="dashboard_id" ref="dashboard_my_tasks"/>
        <field name="chart_type">kpi</field>
        <field name="kpi_model_id" ref="project.model_project_task"/>
        <field name="kpi_data_type">count</field>
        <field name="kpi_domain">[('user_ids', 'in', [uid]), ('date_deadline', '&lt;', context_today().strftime('%Y-%m-%d')), ('stage_id.fold', '=', False)]</field>
        <field name="default_icon">fa fa-exclamation-circle</field>
        <field name="background_color">#e74c3c</field>
        <field name="font_color">#ffffff</field>
    </record>

    <!-- KPI: Activities Due -->
    <record id="chart_my_activities_kpi" model="dashboard.chart">
        <field name="name">Activities Due</field>
        <field name="dashboard_id" ref="dashboard_my_tasks"/>
        <field name="chart_type">kpi</field>
        <field name="kpi_model_id" ref="mail.model_mail_activity"/>
        <field name="kpi_data_type">count</field>
        <field name="kpi_domain">[('user_id', '=', uid)]</field>
        <field name="kpi_date_filter_field_id" ref="mail.field_mail_activity__date_deadline"/>
        <field name="kpi_date_filter_option">today</field>
        <field name="default_icon">fa fa-bell</field>
        <field name="background_color">#f39c12</field>
        <field name="font_color">#ffffff</field>
    </record>

    <!-- KPI: This Week -->
    <record id="chart_my_week_kpi" model="dashboard.chart">
        <field name="name">This Week</field>
        <field name="dashboard_id" ref="dashboard_my_tasks"/>
        <field name="chart_type">kpi</field>
        <field name="kpi_model_id" ref="project.model_project_task"/>
        <field name="kpi_data_type">count</field>
        <field name="kpi_domain">[('user_ids', 'in', [uid]), ('stage_id.fold', '=', False)]</field>
        <field name="kpi_date_filter_field_id" ref="project.field_project_task__date_deadline"/>
        <field name="kpi_date_filter_option">this_week</field>
        <field name="default_icon">fa fa-tasks</field>
        <field name="background_color">#27ae60</field>
        <field name="font_color">#ffffff</field>
    </record>

    <!-- List: My Tasks Today -->
    <record id="chart_my_tasks_today" model="dashboard.chart">
        <field name="name">My Tasks Today</field>
        <field name="dashboard_id" ref="dashboard_my_tasks"/>
        <field name="chart_type">list</field>
        <field name="model_id" ref="project.model_project_task"/>
        <field name="domain">[('user_ids', 'in', [uid]), ('stage_id.fold', '=', False)]</field>
        <field name="date_filter_field_id" ref="project.field_project_task__date_deadline"/>
        <field name="date_filter_option">today</field>
        <field name="limit_record">10</field>
    </record>

    <!-- List: My Overdue Tasks -->
    <record id="chart_my_overdue_tasks" model="dashboard.chart">
        <field name="name">My Overdue Tasks</field>
        <field name="dashboard_id" ref="dashboard_my_tasks"/>
        <field name="chart_type">list</field>
        <field name="model_id" ref="project.model_project_task"/>
        <field name="domain">[('user_ids', 'in', [uid]), ('date_deadline', '&lt;', context_today().strftime('%Y-%m-%d')), ('stage_id.fold', '=', False)]</field>
        <field name="limit_record">10</field>
    </record>

    <!-- To-Do -->
    <record id="chart_my_todos" model="dashboard.chart">
        <field name="name">My To-Do's</field>
        <field name="dashboard_id" ref="dashboard_my_tasks"/>
        <field name="chart_type">to_do</field>
        <field name="todo_layout">default</field>
    </record>

    <!-- ========================================== -->
    <!-- TAB 2: TEAM                                -->
    <!-- ========================================== -->

    <!-- KPI: Total Open Tasks -->
    <record id="chart_team_total_tasks_kpi" model="dashboard.chart">
        <field name="name">Total Open Tasks</field>
        <field name="dashboard_id" ref="dashboard_team"/>
        <field name="chart_type">kpi</field>
        <field name="kpi_model_id" ref="project.model_project_task"/>
        <field name="kpi_data_type">count</field>
        <field name="kpi_domain">[('stage_id.fold', '=', False)]</field>
        <field name="default_icon">fa fa-tasks</field>
        <field name="background_color">#3498db</field>
        <field name="font_color">#ffffff</field>
    </record>

    <!-- KPI: Total Overdue -->
    <record id="chart_team_overdue_kpi" model="dashboard.chart">
        <field name="name">Total Overdue</field>
        <field name="dashboard_id" ref="dashboard_team"/>
        <field name="chart_type">kpi</field>
        <field name="kpi_model_id" ref="project.model_project_task"/>
        <field name="kpi_data_type">count</field>
        <field name="kpi_domain">[('date_deadline', '&lt;', context_today().strftime('%Y-%m-%d')), ('stage_id.fold', '=', False)]</field>
        <field name="default_icon">fa fa-exclamation-triangle</field>
        <field name="background_color">#e74c3c</field>
        <field name="font_color">#ffffff</field>
    </record>

    <!-- KPI: Active Projects -->
    <record id="chart_team_active_projects_kpi" model="dashboard.chart">
        <field name="name">Active Projects</field>
        <field name="dashboard_id" ref="dashboard_team"/>
        <field name="chart_type">kpi</field>
        <field name="kpi_model_id" ref="project.model_project_project"/>
        <field name="kpi_data_type">count</field>
        <field name="kpi_domain">[('active', '=', True)]</field>
        <field name="default_icon">fa fa-folder-open</field>
        <field name="background_color">#27ae60</field>
        <field name="font_color">#ffffff</field>
    </record>

    <!-- List: All Overdue Tasks -->
    <record id="chart_team_overdue_tasks" model="dashboard.chart">
        <field name="name">All Overdue Tasks</field>
        <field name="dashboard_id" ref="dashboard_team"/>
        <field name="chart_type">list</field>
        <field name="model_id" ref="project.model_project_task"/>
        <field name="domain">[('date_deadline', '&lt;', context_today().strftime('%Y-%m-%d')), ('stage_id.fold', '=', False)]</field>
        <field name="limit_record">15</field>
    </record>

    <!-- ========================================== -->
    <!-- TAB 3: EVENTS                              -->
    <!-- ========================================== -->

    <!-- KPI: Events This Week -->
    <record id="chart_events_week_kpi" model="dashboard.chart">
        <field name="name">Events This Week</field>
        <field name="dashboard_id" ref="dashboard_events"/>
        <field name="chart_type">kpi</field>
        <field name="kpi_model_id" ref="project.model_project_project"/>
        <field name="kpi_data_type">count</field>
        <field name="kpi_domain">[('active', '=', True)]</field>
        <field name="kpi_date_filter_option">this_week</field>
        <field name="default_icon">fa fa-calendar-o</field>
        <field name="background_color">#27ae60</field>
        <field name="font_color">#ffffff</field>
    </record>

    <!-- KPI: Events This Month -->
    <record id="chart_events_month_kpi" model="dashboard.chart">
        <field name="name">Events This Month</field>
        <field name="dashboard_id" ref="dashboard_events"/>
        <field name="chart_type">kpi</field>
        <field name="kpi_model_id" ref="project.model_project_project"/>
        <field name="kpi_data_type">count</field>
        <field name="kpi_domain">[('active', '=', True)]</field>
        <field name="kpi_date_filter_option">this_month</field>
        <field name="default_icon">fa fa-calendar-plus-o</field>
        <field name="background_color">#9b59b6</field>
        <field name="font_color">#ffffff</field>
    </record>

    <!-- List: This Week's Events -->
    <record id="chart_events_this_week" model="dashboard.chart">
        <field name="name">This Week's Events</field>
        <field name="dashboard_id" ref="dashboard_events"/>
        <field name="chart_type">list</field>
        <field name="model_id" ref="project.model_project_project"/>
        <field name="domain">[('active', '=', True)]</field>
        <field name="date_filter_option">this_week</field>
        <field name="limit_record">15</field>
    </record>

    <!-- List: Upcoming Events -->
    <record id="chart_events_upcoming" model="dashboard.chart">
        <field name="name">Upcoming Events</field>
        <field name="dashboard_id" ref="dashboard_events"/>
        <field name="chart_type">list</field>
        <field name="model_id" ref="project.model_project_project"/>
        <field name="domain">[('active', '=', True)]</field>
        <field name="date_filter_option">next_month</field>
        <field name="limit_record">20</field>
    </record>

    <!-- ========================================== -->
    <!-- TAB 4: PIPELINE                            -->
    <!-- ========================================== -->

    <!-- KPI: Open Leads -->
    <record id="chart_pipeline_open_leads_kpi" model="dashboard.chart">
        <field name="name">Open Leads</field>
        <field name="dashboard_id" ref="dashboard_pipeline"/>
        <field name="chart_type">kpi</field>
        <field name="kpi_model_id" ref="crm.model_crm_lead"/>
        <field name="kpi_data_type">count</field>
        <field name="kpi_domain">[('type', '=', 'lead'), ('active', '=', True)]</field>
        <field name="default_icon">fa fa-bullseye</field>
        <field name="background_color">#3498db</field>
        <field name="font_color">#ffffff</field>
    </record>

    <!-- KPI: Open Opportunities -->
    <record id="chart_pipeline_opportunities_kpi" model="dashboard.chart">
        <field name="name">Open Opportunities</field>
        <field name="dashboard_id" ref="dashboard_pipeline"/>
        <field name="chart_type">kpi</field>
        <field name="kpi_model_id" ref="crm.model_crm_lead"/>
        <field name="kpi_data_type">count</field>
        <field name="kpi_domain">[('type', '=', 'opportunity'), ('active', '=', True)]</field>
        <field name="default_icon">fa fa-trophy</field>
        <field name="background_color">#27ae60</field>
        <field name="font_color">#ffffff</field>
    </record>

    <!-- KPI: Expected Revenue -->
    <record id="chart_pipeline_expected_revenue_kpi" model="dashboard.chart">
        <field name="name">Expected Revenue</field>
        <field name="dashboard_id" ref="dashboard_pipeline"/>
        <field name="chart_type">kpi</field>
        <field name="kpi_model_id" ref="crm.model_crm_lead"/>
        <field name="kpi_data_type">sum</field>
        <field name="kpi_measurement_field_id" ref="crm.field_crm_lead__expected_revenue"/>
        <field name="kpi_domain">[('type', '=', 'opportunity'), ('active', '=', True)]</field>
        <field name="default_icon">fa fa-dollar</field>
        <field name="background_color">#f39c12</field>
        <field name="font_color">#ffffff</field>
    </record>

    <!-- List: My Open Leads -->
    <record id="chart_pipeline_my_leads" model="dashboard.chart">
        <field name="name">My Open Leads</field>
        <field name="dashboard_id" ref="dashboard_pipeline"/>
        <field name="chart_type">list</field>
        <field name="model_id" ref="crm.model_crm_lead"/>
        <field name="domain">[('type', '=', 'lead'), ('user_id', '=', uid), ('active', '=', True)]</field>
        <field name="limit_record">10</field>
    </record>

    <!-- List: My Open Opportunities -->
    <record id="chart_pipeline_my_opportunities" model="dashboard.chart">
        <field name="name">My Open Opportunities</field>
        <field name="dashboard_id" ref="dashboard_pipeline"/>
        <field name="chart_type">list</field>
        <field name="model_id" ref="crm.model_crm_lead"/>
        <field name="domain">[('type', '=', 'opportunity'), ('user_id', '=', uid), ('active', '=', True)]</field>
        <field name="limit_record">10</field>
    </record>

    <!-- List: Unsigned Quotes -->
    <record id="chart_pipeline_unsigned_quotes" model="dashboard.chart">
        <field name="name">Unsigned Quotes</field>
        <field name="dashboard_id" ref="dashboard_pipeline"/>
        <field name="chart_type">list</field>
        <field name="model_id" ref="sale.model_sale_order"/>
        <field name="domain">[('state', 'in', ['draft', 'sent'])]</field>
        <field name="limit_record">15</field>
    </record>

    <!-- ========================================== -->
    <!-- TAB 5: VENDORS                             -->
    <!-- ========================================== -->

    <!-- KPI: Total Vendors -->
    <record id="chart_vendors_total_kpi" model="dashboard.chart">
        <field name="name">Total Vendors</field>
        <field name="dashboard_id" ref="dashboard_vendors"/>
        <field name="chart_type">kpi</field>
        <field name="kpi_model_id" ref="base.model_res_partner"/>
        <field name="kpi_data_type">count</field>
        <field name="kpi_domain">[('supplier_rank', '>', 0), ('is_company', '=', True)]</field>
        <field name="default_icon">fa fa-truck</field>
        <field name="background_color">#3498db</field>
        <field name="font_color">#ffffff</field>
    </record>

    <!-- List: All Vendors -->
    <record id="chart_vendors_all" model="dashboard.chart">
        <field name="name">All Vendors</field>
        <field name="dashboard_id" ref="dashboard_vendors"/>
        <field name="chart_type">list</field>
        <field name="model_id" ref="base.model_res_partner"/>
        <field name="domain">[('supplier_rank', '>', 0), ('is_company', '=', True)]</field>
        <field name="limit_record">20</field>
    </record>

    <!-- ========================================== -->
    <!-- TAB 6: SALES METRICS                       -->
    <!-- ========================================== -->

    <!-- KPI: Revenue This Month -->
    <record id="chart_sales_revenue_month_kpi" model="dashboard.chart">
        <field name="name">Revenue This Month</field>
        <field name="dashboard_id" ref="dashboard_sales_metrics"/>
        <field name="chart_type">kpi</field>
        <field name="kpi_model_id" ref="sale.model_sale_order"/>
        <field name="kpi_data_type">sum</field>
        <field name="kpi_measurement_field_id" ref="sale.field_sale_order__amount_total"/>
        <field name="kpi_domain">[('state', 'in', ['sale', 'done'])]</field>
        <field name="kpi_date_filter_field_id" ref="sale.field_sale_order__date_order"/>
        <field name="kpi_date_filter_option">this_month</field>
        <field name="default_icon">fa fa-dollar</field>
        <field name="background_color">#27ae60</field>
        <field name="font_color">#ffffff</field>
    </record>

    <!-- KPI: Orders This Month -->
    <record id="chart_sales_orders_month_kpi" model="dashboard.chart">
        <field name="name">Orders This Month</field>
        <field name="dashboard_id" ref="dashboard_sales_metrics"/>
        <field name="chart_type">kpi</field>
        <field name="kpi_model_id" ref="sale.model_sale_order"/>
        <field name="kpi_data_type">count</field>
        <field name="kpi_domain">[('state', 'in', ['sale', 'done'])]</field>
        <field name="kpi_date_filter_field_id" ref="sale.field_sale_order__date_order"/>
        <field name="kpi_date_filter_option">this_month</field>
        <field name="default_icon">fa fa-shopping-cart</field>
        <field name="background_color">#3498db</field>
        <field name="font_color">#ffffff</field>
    </record>

    <!-- KPI: Outstanding Payments -->
    <record id="chart_sales_outstanding_kpi" model="dashboard.chart">
        <field name="name">Outstanding Payments</field>
        <field name="dashboard_id" ref="dashboard_sales_metrics"/>
        <field name="chart_type">kpi</field>
        <field name="kpi_model_id" ref="account.model_account_move"/>
        <field name="kpi_data_type">sum</field>
        <field name="kpi_measurement_field_id" ref="account.field_account_move__amount_residual"/>
        <field name="kpi_domain">[('move_type', '=', 'out_invoice'), ('payment_state', 'in', ['not_paid', 'partial'])]</field>
        <field name="default_icon">fa fa-exclamation-circle</field>
        <field name="background_color">#e74c3c</field>
        <field name="font_color">#ffffff</field>
    </record>

    <!-- List: Recent Confirmed Orders -->
    <record id="chart_sales_recent_orders" model="dashboard.chart">
        <field name="name">Recent Confirmed Orders</field>
        <field name="dashboard_id" ref="dashboard_sales_metrics"/>
        <field name="chart_type">list</field>
        <field name="model_id" ref="sale.model_sale_order"/>
        <field name="domain">[('state', 'in', ['sale', 'done'])]</field>
        <field name="date_filter_field_id" ref="sale.field_sale_order__date_order"/>
        <field name="date_filter_option">this_month</field>
        <field name="limit_record">15</field>
    </record>

    <!-- List: Unpaid Invoices -->
    <record id="chart_sales_unpaid_invoices" model="dashboard.chart">
        <field name="name">Unpaid Invoices</field>
        <field name="dashboard_id" ref="dashboard_sales_metrics"/>
        <field name="chart_type">list</field>
        <field name="model_id" ref="account.model_account_move"/>
        <field name="domain">[('move_type', '=', 'out_invoice'), ('payment_state', 'in', ['not_paid', 'partial'])]</field>
        <field name="limit_record">15</field>
    </record>

</odoo>
