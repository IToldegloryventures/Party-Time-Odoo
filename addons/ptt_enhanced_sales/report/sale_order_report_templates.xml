<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!--
        PTT Event Details on Sale Order / Quote Report
        =============================================
        
        This extends the standard sale order report (PDF) to include event details
        that are visible to customers on printed quotes and contracts.
    -->
    
    <!-- Extend Sale Order Report to include Event Details -->
    <template id="report_saleorder_event_details" inherit_id="sale.report_saleorder_document">
        <!-- Add Event Details before the order lines table -->
        <xpath expr="//div[@id='informations']" position="after">
            <t t-if="doc.event_name or doc.event_type_id">
                <div class="row mt-4 mb-4" style="border: 1px solid #dee2e6; border-radius: 5px; padding: 15px; background-color: #f8f9fa;">
                    <div class="col-12">
                        <h4 style="color: #495057; margin-bottom: 15px;">
                            <strong>Event Details</strong>
                        </h4>
                    </div>
                    
                    <div class="col-6">
                        <table class="table table-sm table-borderless" style="margin-bottom: 0;">
                            <tbody>
                                <t t-if="doc.event_name">
                                    <tr>
                                        <td style="width: 40%; font-weight: bold;">Event Name:</td>
                                        <td><t t-esc="doc.event_name"/></td>
                                    </tr>
                                </t>
                                <t t-if="doc.event_type_id">
                                    <tr>
                                        <td style="font-weight: bold;">Event Type:</td>
                                        <td><t t-esc="doc.event_type_id.name"/></td>
                                    </tr>
                                </t>
                                <t t-if="doc.event_date">
                                    <tr>
                                        <td style="font-weight: bold;">Event Start:</td>
                                        <td><t t-esc="doc.event_date" t-options='{"widget": "datetime", "format": "MMMM d, yyyy h:mm a"}'/></td>
                                    </tr>
                                </t>
                                <t t-if="doc.event_end_datetime">
                                    <tr>
                                        <td style="font-weight: bold;">Event End:</td>
                                        <td><t t-esc="doc.event_end_datetime" t-options='{"widget": "datetime", "format": "h:mm a"}'/></td>
                                    </tr>
                                </t>
                                <t t-if="doc.setup_time">
                                    <tr>
                                        <td style="font-weight: bold;">Setup Starts:</td>
                                        <td><t t-esc="doc.setup_time" t-options='{"widget": "datetime", "format": "h:mm a"}'/></td>
                                    </tr>
                                </t>
                                <t t-if="doc.event_guest_count">
                                    <tr>
                                        <td style="font-weight: bold;">Guest Count:</td>
                                        <td><t t-esc="doc.event_guest_count"/></td>
                                    </tr>
                                </t>
                                <t t-if="doc.event_attire">
                                    <tr>
                                        <td style="font-weight: bold;">Attire:</td>
                                        <td><t t-esc="dict(doc._fields['event_attire'].selection).get(doc.event_attire, '')"/></td>
                                    </tr>
                                </t>
                            </tbody>
                        </table>
                    </div>
                    
                    <div class="col-6">
                        <table class="table table-sm table-borderless" style="margin-bottom: 0;">
                            <tbody>
                                <t t-if="doc.event_venue">
                                    <tr>
                                        <td style="width: 40%; font-weight: bold;">Venue:</td>
                                        <td><t t-esc="doc.event_venue"/></td>
                                    </tr>
                                </t>
                                <t t-if="doc.event_venue_type">
                                    <tr>
                                        <td style="font-weight: bold;">Venue Type:</td>
                                        <td><t t-esc="dict(doc._fields['event_venue_type'].selection).get(doc.event_venue_type, '')"/></td>
                                    </tr>
                                </t>
                                <t t-if="doc.event_venue_booked">
                                    <tr>
                                        <td style="font-weight: bold;">Venue Booked:</td>
                                        <td>Yes</td>
                                    </tr>
                                </t>
                                <t t-if="doc.event_venue_address">
                                    <tr>
                                        <td style="font-weight: bold;">Address:</td>
                                        <td><t t-esc="doc.event_venue_address"/></td>
                                    </tr>
                                </t>
                                <t t-if="doc.event_duration">
                                    <tr>
                                        <td style="font-weight: bold;">Duration:</td>
                                        <td><t t-esc="doc.event_duration"/> hours</td>
                                    </tr>
                                </t>
                                <t t-if="doc.breakdown_time">
                                    <tr>
                                        <td style="font-weight: bold;">Breakdown:</td>
                                        <td><t t-esc="doc.breakdown_time" t-options='{"widget": "datetime", "format": "h:mm a"}'/></td>
                                    </tr>
                                </t>
                            </tbody>
                        </table>
                    </div>
                </div>
            </t>
        </xpath>
    </template>

</odoo>
